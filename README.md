# Traefik Manager

![Version](https://img.shields.io/badge/Traefik_Manager-v1.4.0-blue) ![Docker](https://img.shields.io/badge/Docker-Ready-brightgreen) ![Kubernetes](https://img.shields.io/badge/Kubernetes-Ready-brightgreen) ![Native](https://img.shields.io/badge/Native-Ready-brightgreen)

**Интерактивный скрипт для управления Traefik в средах Docker, Kubernetes и нативной установке.**  
Traefik Manager позволяет легко настраивать, управлять и мониторить Traefik без необходимости знания сложных команд.

---

## Функциональные возможности

- **Управление Docker**: работа с лейблами контейнеров для настройки маршрутизации.
- **Управление Kubernetes**: создание и редактирование IngressRoute.
- **Управление статическими конфигурациями**: создание и редактирование файлов конфигурации.
- **Нативная установка**: возможность работы без Docker и Kubernetes.
- **Автоматизированная установка**: поддержка установки зависимостей.
- **Резервное копирование**: создание и управление резервными копиями конфигураций.
- **Мониторинг**: просмотр метрик и состояния Traefik.
- **Проверка безопасности**: анализ конфигураций на предмет уязвимостей.
- **Динамическое включение/отключение поддержки Kubernetes и Docker.**

---

## Поддерживаемые платформы

- Docker
- Kubernetes (включая minikube и kind)
- Нативная установка (без контейнеризации)
- Различные дистрибутивы Linux (Ubuntu, Debian, CentOS)

---

## Требования

- **jq** (устанавливается автоматически при необходимости)
- Для функций Docker:
  - **Docker** (устанавливается автоматически при необходимости)
- Для функций Kubernetes:
  - **kubectl** (устанавливается автоматически при необходимости)
  - **minikube** или **kind** (устанавливается автоматически при необходимости)
  - Минимум **2GB RAM**

---

## Быстрая установка
```bash
curl -s https://raw.githubusercontent.com/gopnikgame/traefik-manager/main/traefik-manager.sh -o /tmp/traefik-manager.sh && sudo bash /tmp/traefik-manager.sh
```

---

## Основные функции

### Управление Docker-лейблами
Простая настройка маршрутизации для контейнеров через систему лейблов Traefik:
- Добавление и удаление лейблов.
- Проверка существующих лейблов.
- Подсказки для популярных настроек.

### Управление Kubernetes
Работа с ресурсами Traefik в Kubernetes:
- Создание IngressRoute с шаблонами.
- Редактирование и удаление IngressRoute.
- Автоматическая установка и настройка minikube.

### Управление статическими конфигурациями
- Создание новых конфигурационных файлов.
- Редактирование существующих конфигураций.
- Применение конфигурации с автоматическим перезапуском Traefik.

### Мониторинг и безопасность
- Проверка конфигурации Traefik.
- Анализ безопасности и рекомендации.
- Просмотр метрик и логов.

---

## Режимы установки

Скрипт поддерживает три режима установки Traefik:
- **Docker**: установка и управление Traefik в контейнере Docker
- **Kubernetes**: установка через Helm в кластер Kubernetes
- **Нативный режим**: установка напрямую в систему без контейнеризации

---

## Использование

После запуска скрипта выберите нужную функцию из интерактивного меню:

1. Управление Docker-контейнерами (лейблы) - доступно если Docker включен
2. Управление Kubernetes (IngressRoute) - доступно если Kubernetes включен
3. Редактирование основного конфига (traefik.yml)
4. Редактирование динамических конфигов (в conf.d/)
5. Управление статическими конфигурациями
6. Перезапуск Traefik
7. Проверка конфигурации
8. Создание резервной копии конфигураций
9. Мониторинг Traefik
10. Проверка безопасности
11. Установка Traefik (Docker/Kubernetes/Нативно)
12. Включение/отключение поддержки Kubernetes
13. Включение/отключение поддержки Docker

---

## Логирование

Скрипт ведет подробный лог операций, который доступен по пути:
```bash
/var/log/traefik-manager.log
```
---

## Резервное копирование

Резервные копии конфигураций Traefik сохраняются в:
```bash
/opt/traefik-backups
```
---

## Лицензия

MIT License

---

## Авторы

Создано **gopnikgame**

---

> Решайте ваши задачи с Traefik легко и элегантно!
